# league-analysis
A data analysis exploring League of Legends esports games with a final machine learning model to predict player positions. This is a final project submission for EECS 398: Practical Data Science at the University of Michigan.

## Step 1: Introduction
The goal of this analysis is to find interesting insights into how player positions (i.e. top lane, jungle, mid lane, etc.) are exemplified by data. The first question investigated by this report is: which position is most valuable to their team? Every League of Legends (LoL) player likes to think they carry their team, but is there really one clear MVP?

To answer this question I'm using a dataset provided by [Oracle's Elixir](https://oracleselixir.com/tools/downloads). It contains 150,589 rows of data on 2022 LoL esports matches from various professional leagues. Relevent columns in this dataset include 'kills,' 'deaths,' and 'assists' which represent total kills, deaths, and assists (respectively) by a player in a match (pretty self-explanatory). There's also a 'champion' column providing the name of which character a player selected. Last but not least is 'position,' a column describing either a player's role in the match or indicating that the row is a 'team' row. Team rows summarize the team's overall stats, but are not relevant to this analysis. For player rows, 'position' is either 'top' for top lane, 'jng' for jungle, 'mid' for mid lane, 'bot' for bottom lane, or 'sup' for support.

## Step 2: Data Cleaning and Exploratory Data Analysis

### Data Cleaning
The dataset contained both player and team rows as mentioned in the introduction. This would be an issue during all data analysis steps because team kill/death/assist and all other player stats would effectively be double counted. I removed the team rows from the data set by extracting all rows with the exception of rows with the value of 'team' in the position column, and putting them in a separate DataFrame. Much later into this analysis I noticed that the column 'datacompleteness' became relevant because NaN values in my calculations were causing errors in model fitting. To resolve this, I removed all rows which had 'partial' in the 'datacompleteness' column, which from my inspection were missing large sums of player stats.

Below are the first few rows of the cleaned dataset:

| gameid                | datacompleteness   |   url | league   |   year | split   |   playoffs | date                |   game |   patch |   participantid | side   | position   | playername   | playerid                                  | teamname          | teamid                                  | champion   | ban1   | ban2    | ban3   | ban4   | ban5   |   pick1 |   pick2 |   pick3 |   pick4 |   pick5 |   gamelength |   result |   kills |   deaths |   assists |   teamkills |   teamdeaths |   doublekills |   triplekills |   quadrakills |   pentakills |   firstblood |   firstbloodkill |   firstbloodassist |   firstbloodvictim |   team kpm |   ckpm |   firstdragon |   dragons |   opp_dragons |   elementaldrakes |   opp_elementaldrakes |   infernals |   mountains |   clouds |   oceans |   chemtechs |   hextechs |   dragons (type unknown) |   elders |   opp_elders |   firstherald |   heralds |   opp_heralds |   void_grubs |   opp_void_grubs |   firstbaron |   barons |   opp_barons |   firsttower |   towers |   opp_towers |   firstmidtower |   firsttothreetowers |   turretplates |   opp_turretplates |   inhibitors |   opp_inhibitors |   damagetochampions |     dpm |   damageshare |   damagetakenperminute |   damagemitigatedperminute |   wardsplaced |    wpm |   wardskilled |   wcpm |   controlwardsbought |   visionscore |   vspm |   totalgold |   earnedgold |   earned gpm |   earnedgoldshare |   goldspent |   gspd |   gpr |   total cs |   minionkills |   monsterkills |   monsterkillsownjungle |   monsterkillsenemyjungle |   cspm |   goldat10 |   xpat10 |   csat10 |   opp_goldat10 |   opp_xpat10 |   opp_csat10 |   golddiffat10 |   xpdiffat10 |   csdiffat10 |   killsat10 |   assistsat10 |   deathsat10 |   opp_killsat10 |   opp_assistsat10 |   opp_deathsat10 |   goldat15 |   xpat15 |   csat15 |   opp_goldat15 |   opp_xpat15 |   opp_csat15 |   golddiffat15 |   xpdiffat15 |   csdiffat15 |   killsat15 |   assistsat15 |   deathsat15 |   opp_killsat15 |   opp_assistsat15 |   opp_deathsat15 |   goldat20 |   xpat20 |   csat20 |   opp_goldat20 |   opp_xpat20 |   opp_csat20 |   golddiffat20 |   xpdiffat20 |   csdiffat20 |   killsat20 |   assistsat20 |   deathsat20 |   opp_killsat20 |   opp_assistsat20 |   opp_deathsat20 |   goldat25 |   xpat25 |   csat25 |   opp_goldat25 |   opp_xpat25 |   opp_csat25 |   golddiffat25 |   xpdiffat25 |   csdiffat25 |   killsat25 |   assistsat25 |   deathsat25 |   opp_killsat25 |   opp_assistsat25 |   opp_deathsat25 |
|:----------------------|:-------------------|------:|:---------|-------:|:--------|-----------:|:--------------------|-------:|--------:|----------------:|:-------|:-----------|:-------------|:------------------------------------------|:------------------|:----------------------------------------|:-----------|:-------|:--------|:-------|:-------|:-------|--------:|--------:|--------:|--------:|--------:|-------------:|---------:|--------:|---------:|----------:|------------:|-------------:|--------------:|--------------:|--------------:|-------------:|-------------:|-----------------:|-------------------:|-------------------:|-----------:|-------:|--------------:|----------:|--------------:|------------------:|----------------------:|------------:|------------:|---------:|---------:|------------:|-----------:|-------------------------:|---------:|-------------:|--------------:|----------:|--------------:|-------------:|-----------------:|-------------:|---------:|-------------:|-------------:|---------:|-------------:|----------------:|---------------------:|---------------:|-------------------:|-------------:|-----------------:|--------------------:|--------:|--------------:|-----------------------:|---------------------------:|--------------:|-------:|--------------:|-------:|---------------------:|--------------:|-------:|------------:|-------------:|-------------:|------------------:|------------:|-------:|------:|-----------:|--------------:|---------------:|------------------------:|--------------------------:|-------:|-----------:|---------:|---------:|---------------:|-------------:|-------------:|---------------:|-------------:|-------------:|------------:|--------------:|-------------:|----------------:|------------------:|-----------------:|-----------:|---------:|---------:|---------------:|-------------:|-------------:|---------------:|-------------:|-------------:|------------:|--------------:|-------------:|----------------:|------------------:|-----------------:|-----------:|---------:|---------:|---------------:|-------------:|-------------:|---------------:|-------------:|-------------:|------------:|--------------:|-------------:|----------------:|------------------:|-----------------:|-----------:|---------:|---------:|---------------:|-------------:|-------------:|---------------:|-------------:|-------------:|------------:|--------------:|-------------:|----------------:|------------------:|-----------------:|
| ESPORTSTMNT01_2690210 | complete           |   nan | LCKC     |   2022 | Spring  |          0 | 2022-01-10 07:44:08 |      1 |   12.01 |               1 | Blue   | top        | Soboro       | oe:player:38e0af7278d6769d0c81d7c4b47ac1e | BRION Challengers | oe:team:733ebb9dbf22a401c0127a0c80193ca | Renekton   | Karma  | Caitlyn | Syndra | Thresh | Lulu   |     nan |     nan |     nan |     nan |     nan |         1713 |        0 |       2 |        3 |         2 |           9 |           19 |             0 |             0 |             0 |            0 |            0 |                0 |                  0 |                  0 |     0.3152 | 0.9807 |           nan |       nan |           nan |               nan |                   nan |         nan |         nan |      nan |      nan |         nan |        nan |                      nan |      nan |          nan |           nan |       nan |           nan |          nan |              nan |          nan |        0 |            0 |          nan |      nan |          nan |             nan |                  nan |            nan |                nan |            0 |                0 |               15768 | 552.294 |     0.278784  |               1072.4   |                    777.793 |             8 | 0.2802 |             6 | 0.2102 |                    5 |            26 | 0.9107 |       10934 |         7164 |      250.928 |          0.253859 |       10275 |    nan |   nan |        231 |           220 |             11 |                     nan |                       nan | 8.0911 |       3228 |     4909 |       89 |           3176 |         4953 |           81 |             52 |          -44 |            8 |           0 |             0 |            0 |               0 |                 0 |                0 |       5025 |     7560 |      135 |           4634 |         7215 |          121 |            391 |          345 |           14 |           0 |             1 |            0 |               0 |                 1 |                0 |       6506 |     9853 |      172 |           6338 |        10200 |          171 |            168 |         -347 |            1 |           0 |             1 |            1 |               0 |                 2 |                0 |       8462 |    11754 |      212 |           7857 |        12279 |          203 |            605 |         -525 |            9 |           0 |             1 |            1 |               0 |                 2 |                0 |
| ESPORTSTMNT01_2690210 | complete           |   nan | LCKC     |   2022 | Spring  |          0 | 2022-01-10 07:44:08 |      1 |   12.01 |               2 | Blue   | jng        | Raptor       | oe:player:637ed20b1e41be1c51bd1a4cb211357 | BRION Challengers | oe:team:733ebb9dbf22a401c0127a0c80193ca | Xin Zhao   | Karma  | Caitlyn | Syndra | Thresh | Lulu   |     nan |     nan |     nan |     nan |     nan |         1713 |        0 |       2 |        5 |         6 |           9 |           19 |             0 |             0 |             0 |            0 |            1 |                0 |                  1 |                  0 |     0.3152 | 0.9807 |           nan |       nan |           nan |               nan |                   nan |         nan |         nan |      nan |      nan |         nan |        nan |                      nan |      nan |          nan |           nan |       nan |           nan |          nan |              nan |          nan |        0 |            0 |          nan |      nan |          nan |             nan |                  nan |            nan |                nan |            0 |                1 |               11765 | 412.084 |     0.208009  |                944.273 |                    650.158 |             6 | 0.2102 |            18 | 0.6305 |                    6 |            48 | 1.6813 |        9138 |         5368 |      188.021 |          0.19022  |        8750 |    nan |   nan |        148 |            33 |            115 |                     nan |                       nan | 5.1839 |       3429 |     3484 |       58 |           2944 |         3052 |           63 |            485 |          432 |           -5 |           1 |             2 |            0 |               0 |                 0 |                1 |       5366 |     5320 |       89 |           4825 |         5595 |          100 |            541 |         -275 |          -11 |           2 |             3 |            2 |               0 |                 5 |                1 |       6854 |     7193 |      116 |           6708 |         8275 |          142 |            146 |        -1082 |          -26 |           2 |             3 |            2 |               1 |                 5 |                1 |       8254 |     8958 |      135 |           7833 |         9861 |          163 |            421 |         -903 |          -28 |           2 |             4 |            2 |               1 |                 5 |                1 |
| ESPORTSTMNT01_2690210 | complete           |   nan | LCKC     |   2022 | Spring  |          0 | 2022-01-10 07:44:08 |      1 |   12.01 |               3 | Blue   | mid        | Feisty       | oe:player:d1ae0e2f9f3ac1e0e0cdcb86504ca77 | BRION Challengers | oe:team:733ebb9dbf22a401c0127a0c80193ca | LeBlanc    | Karma  | Caitlyn | Syndra | Thresh | Lulu   |     nan |     nan |     nan |     nan |     nan |         1713 |        0 |       2 |        2 |         3 |           9 |           19 |             0 |             0 |             0 |            0 |            0 |                0 |                  0 |                  0 |     0.3152 | 0.9807 |           nan |       nan |           nan |               nan |                   nan |         nan |         nan |      nan |      nan |         nan |        nan |                      nan |      nan |          nan |           nan |       nan |           nan |          nan |              nan |          nan |        0 |            0 |          nan |      nan |          nan |             nan |                  nan |            nan |                nan |            0 |                0 |               14258 | 499.405 |     0.252086  |                581.646 |                    227.776 |            19 | 0.6655 |             7 | 0.2452 |                    7 |            29 | 1.0158 |        9715 |         5945 |      208.231 |          0.210665 |        8725 |    nan |   nan |        193 |           177 |             16 |                     nan |                       nan | 6.7601 |       3283 |     4556 |       81 |           3121 |         4485 |           81 |            162 |           71 |            0 |           0 |             1 |            0 |               0 |                 0 |                1 |       5118 |     6942 |      120 |           5593 |         6789 |          119 |           -475 |          153 |            1 |           0 |             3 |            0 |               3 |                 3 |                2 |       6511 |     8786 |      157 |           6973 |         9056 |          154 |           -462 |         -270 |            3 |           0 |             3 |            0 |               3 |                 4 |                2 |       8312 |    10537 |      182 |           8461 |        10761 |          187 |           -149 |         -224 |           -5 |           1 |             3 |            0 |               3 |                 4 |                3 |
| ESPORTSTMNT01_2690210 | complete           |   nan | LCKC     |   2022 | Spring  |          0 | 2022-01-10 07:44:08 |      1 |   12.01 |               4 | Blue   | bot        | Gamin        | oe:player:998b3e49b01ecc41eacc392477a98cf | BRION Challengers | oe:team:733ebb9dbf22a401c0127a0c80193ca | Samira     | Karma  | Caitlyn | Syndra | Thresh | Lulu   |     nan |     nan |     nan |     nan |     nan |         1713 |        0 |       2 |        4 |         2 |           9 |           19 |             0 |             0 |             0 |            0 |            1 |                0 |                  1 |                  0 |     0.3152 | 0.9807 |           nan |       nan |           nan |               nan |                   nan |         nan |         nan |      nan |      nan |         nan |        nan |                      nan |      nan |          nan |           nan |       nan |           nan |          nan |              nan |          nan |        0 |            0 |          nan |      nan |          nan |             nan |                  nan |            nan |                nan |            0 |                0 |               11106 | 389.002 |     0.196358  |                463.853 |                    218.879 |            12 | 0.4203 |             6 | 0.2102 |                    4 |            25 | 0.8757 |       10605 |         6835 |      239.405 |          0.242201 |       10425 |    nan |   nan |        226 |           208 |             18 |                     nan |                       nan | 7.9159 |       3600 |     3103 |       78 |           3304 |         2838 |           90 |            296 |          265 |          -12 |           1 |             1 |            0 |               0 |                 0 |                0 |       5461 |     4591 |      115 |           6254 |         5934 |          149 |           -793 |        -1343 |          -34 |           2 |             1 |            2 |               3 |                 3 |                0 |       7306 |     6266 |      153 |           8516 |         8611 |          223 |          -1210 |        -2345 |          -70 |           2 |             1 |            2 |               3 |                 4 |                0 |       9356 |     8287 |      199 |          10644 |        10292 |          284 |          -1288 |        -2005 |          -85 |           2 |             1 |            2 |               3 |                 4 |                0 |
| ESPORTSTMNT01_2690210 | complete           |   nan | LCKC     |   2022 | Spring  |          0 | 2022-01-10 07:44:08 |      1 |   12.01 |               5 | Blue   | sup        | Loopy        | oe:player:e9741b3a238723ea6380ef2113fae63 | BRION Challengers | oe:team:733ebb9dbf22a401c0127a0c80193ca | Leona      | Karma  | Caitlyn | Syndra | Thresh | Lulu   |     nan |     nan |     nan |     nan |     nan |         1713 |        0 |       1 |        5 |         6 |           9 |           19 |             0 |             0 |             0 |            0 |            1 |                1 |                  0 |                  0 |     0.3152 | 0.9807 |           nan |       nan |           nan |               nan |                   nan |         nan |         nan |      nan |      nan |         nan |        nan |                      nan |      nan |          nan |           nan |       nan |           nan |          nan |              nan |          nan |        0 |            0 |          nan |      nan |          nan |             nan |                  nan |            nan |                nan |            0 |                0 |                3663 | 128.301 |     0.0647631 |                475.026 |                    490.123 |            29 | 1.0158 |            14 | 0.4904 |                   11 |            69 | 2.4168 |        6678 |         2908 |      101.856 |          0.103054 |        6395 |    nan |   nan |         42 |            42 |              0 |                     nan |                       nan | 1.4711 |       2678 |     2161 |       16 |           2150 |         2748 |           15 |            528 |         -587 |            1 |           1 |             1 |            0 |               0 |                 0 |                1 |       3836 |     3588 |       28 |           3393 |         4085 |           21 |            443 |         -497 |            7 |           1 |             2 |            2 |               0 |                 6 |                2 |       4785 |     4776 |       33 |           4371 |         5679 |           25 |            414 |         -903 |            8 |           1 |             2 |            2 |               0 |                 7 |                2 |       5840 |     6424 |       39 |           5341 |         6738 |           27 |            499 |         -314 |           12 |           1 |             3 |            2 |               0 |                 7 |                2 |


### Univariate Analysis
 <iframe
 src="assets/univariate-distribution.html"
 width="1000"
 height="1000"
 frameborder="0"
 ></iframe>
The plot above shows distribution of the 'kills' column in the dataset as a bar chart of kill count distributions. The plot is heavily right skewed meaning most players do not get more than 1 or 2 kills per game, but the tail to the right may consist of higher kills by a given position. More analysis is necessary though...

### Bivariate Analysis
 <iframe
 src="assets/bivariate-distribution.html"
 width="1000"
 height="1000"
 frameborder="0"
 ></iframe>
 The plot above shows the distribution of players' kill/death/assist ratios by position, calculated as (kills + assists) / deaths. The medians are all quite close together but mid and bot lane players are tied for highest, indicating that they tend to contribute more kills and assists per life than other positions making them more valuable.

 ### Interesting Aggregate Analysis
 
|   Total Kills |   Total Assists |   Total Deaths |\n|--------------:|----------------:|---------------:|\n|         90744 |          115420 |          54840 |\n|         65951 |          146571 |          67002 |\n|         75662 |          124670 |          57494 |\n|         19094 |          196947 |          69156 |\n|         59659 |          107754 |          63253 |

Above is a table aggregating total kills, assists, and deaths by position. It shows a significant difference in kills and assists among positions, which junglers having more kills but fewer assists, while supports have relatively few kills but the highest amount of assists.

### Can We Answer the Question?
For the purposes of this analysis, being the "most valuable" position should entail contributing the most kills and assists while minimizing deaths. The KDA ratio captures this directly, but unfortunately there is not one clear winner. Middle and bottom laners appear to be the most valuable positions thanks to their high median ratios, while top lane is clearly the worst with a low median ratio (sorry top laners).

## Step 3: Framing a Prediction Problem

